<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan Peelle">

<title>Writing an NIH Grant in 9 ‚Äúeasy‚Äù steps</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Writing an NIH Grant in 9 ‚Äúeasy‚Äù steps</h1>
<p class="subtitle lead">Step 5: Research Strategy Organization</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Jonathan Peelle 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Northeastern University <br> <a href="http://neuromatch.social/@jpeelle"><span class="citation" data-cites="jpeelle">@jpeelle</span><span class="citation" data-cites="neuromatch.social">@neuromatch.social</span></a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<section id="homework-updates-and-questions" class="level2" data-background-image="images/isec01.jpg" data-background-repeat="no-repeat" data-background-opacity="0.5">
<h2 data-background-image="images/isec01.jpg" data-background-repeat="no-repeat" data-background-opacity="0.5" class="anchored" data-anchor-id="homework-updates-and-questions">Homework updates and questions</h2>
</section>
<section id="research-strategy" class="level2">
<h2 class="anchored" data-anchor-id="research-strategy">Research Strategy</h2>
<ul>
<li>After your aims, the most important part of your grant</li>
<li>Improves through iteration, feedback, and experience</li>
<li>Important to focus both on <em>content</em> (scientific ideas) and <em>presentation</em> (how you communicate these ideas, particularly aesthetic and organizational choices)</li>
</ul>
</section>
<section id="part-1-content" class="level1">
<h1>Part 1: Content</h1>
<section id="organization" class="level2">
<h2 class="anchored" data-anchor-id="organization">Organization</h2>
<ul>
<li><p>Standard sections</p></li>
<li><p>Everyone allocates space differently and there are many effective ways to structure a grant, but remember your job: <em>make the reviewer‚Äôs job easy</em></p>
<ul>
<li>Tell them what they need to know to understand your grant</li>
<li>Highlight what you anticipate are score-driving factors (particularly significance and innovation)</li>
</ul></li>
</ul>
</section>
<section id="a-suggested-organization" class="level2">
<h2 class="anchored" data-anchor-id="a-suggested-organization">A suggested organization</h2>
<ul>
<li>Significance (half page)</li>
<li>Innovation (half page)</li>
<li>Background
<ul>
<li>Tell reviewers everything they need to know to understand your grant</li>
<li>Highlight your past work as appropriate</li>
</ul></li>
<li>General methodology (if anything common across aims)
<ul>
<li>Subject selection, data acquisition, assessments‚Ä¶</li>
</ul></li>
<li>Details of each aim (preliminary data under each aim)</li>
</ul>
</section>
<section id="alternate-organization-1" class="level2">
<h2 class="anchored" data-anchor-id="alternate-organization-1">Alternate organization 1</h2>
<ul>
<li>Significance and Background together and long</li>
<li>Preliminary data for all aims</li>
<li>General methodology</li>
<li>Details of each aim</li>
</ul>
<p>As a reviewer I prefer the details and preliminary data for each aim near each other: I read the method, wonder if it works, and then <em>BAM</em>: ‚ÄúFigure 8 shows preliminary data for this aim proving it works‚Äù</p>
</section>
<section id="headings" class="level2">
<h2 class="anchored" data-anchor-id="headings">Headings</h2>
<ul>
<li>You can have whatever subheadings you want
<ul>
<li>Use these to help reviewers, especially the ones who might be skimming</li>
<li>Impeccable nested numbering does not prevent reviewers from getting confused</li>
</ul></li>
</ul>
</section>
<section id="organization-1" class="level2">
<h2 class="anchored" data-anchor-id="organization-1">Organization</h2>
<p>What I do: Start by outlining the logical progression I want to present to the reviewers before they see the specific experiments. These points (perhaps with some rewording) become subheadings in the background.</p>
</section>
<section id="organization-2" class="level2">
<h2 class="anchored" data-anchor-id="organization-2">Organization</h2>
<p>In a recent grant, we proposed a new way of looking at accented speech in noise:</p>
<ul>
<li>Accent and how we talk about it</li>
<li>Pupil diameter as a physiological measure of cognitive effort</li>
<li>Cognitive effort during listening: Empirical observations</li>
<li>Cognitive effort during listening: Theoretical considerations</li>
<li>Framing the processes that help us understand difficult speech</li>
<li>State of the field: brain regions underlying challenging listening in individual listeners</li>
</ul>
</section>
<section id="paragraphs" class="level2">
<h2 class="anchored" data-anchor-id="paragraphs">Paragraphs</h2>
<ul>
<li>Don‚Äôt leave reviewers to draw their own conclusions - tell them what they should take away.</li>
<li>When in doubt, go back to basics:
<ul>
<li>One main topic per paragraph, which is:
<ul>
<li>introduced with a topic sentence</li>
<li>ends with a concluding sentence</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="significance" class="level2">
<h2 class="anchored" data-anchor-id="significance">Significance</h2>
<ul>
<li>Not a literature review! But, need to walk reviewers through relevant literature to highlight the critical gap in the field that your proposal addresses</li>
<li>Do not assume your reviewers know the critical background</li>
<li>Do not assume your reviewers find the topic obviously important or can see possible translational implications</li>
</ul>
</section>
<section id="significance-clinical-applications" class="level2">
<h2 class="anchored" data-anchor-id="significance-clinical-applications">Significance: Clinical applications</h2>
<ul>
<li>NIH funds plenty of basic science. Not everything needs to be clinical.</li>
<li>However, reviewers will differ in the degree to which they want to see clear clinical or translational implciations from your work.</li>
<li>Try to be specific as much as possible and assume there is a clinician reading your grant who cares deeply about this issue.</li>
</ul>
</section>
<section id="innovation" class="level2">
<h2 class="anchored" data-anchor-id="innovation">Innovation</h2>
<ul>
<li>Historically a scored criteria (and thus nice to give it its own section)</li>
<li>Many ways to be innovative:
<ul>
<li>Using a new technique, or novel combination of techniques</li>
<li>Introducing a new theoretical perspective</li>
</ul></li>
<li>In practice, I have found that reviewers have an easier time saying nice things about innovation when it is technical (‚ÄúWe are using a machine that no one else has‚Äù) as opposed to theoretical. But, it varies a lot by reviewer.</li>
</ul>
</section>
<section id="rigor-and-reproducibility" class="level2">
<h2 class="anchored" data-anchor-id="rigor-and-reproducibility">Rigor and reproducibility</h2>
<ul>
<li><p>Not a required section but <a href="https://grants.nih.gov/policy/reproducibility/guidance.htm">reviewers are instructed to evaluate this</a></p></li>
<li><p>Includes sex as a biological variable (SABV) that reviewers are instructed to evaluate</p></li>
</ul>
</section>
<section id="rigor-and-reproducibility-1" class="level2">
<h2 class="anchored" data-anchor-id="rigor-and-reproducibility-1">Rigor and reproducibility</h2>
<div style="font-size:.8em">
<p>Experiments will be preregistered prior to data collection commencing, and all experimental details will be reported to allow full replication. We will make all stimuli and analysis scripts available online through the Open Science Framework or similar third-party hosted public repository; share behavioral data on the NIMH Data Archive (NDA); and share deidentified, defaced MRI data through OpenNeuro. Past examples of data sharing can be found for example with OpenNeuro data sets ds002382 (61 participants, fMRI) and ds003717 (60 participants, fMRI), and OSF project s5ut8 (143 participants, pupillometry).</p>
<p>We plan to recruit equal numbers of male and female participants. Although not powered for sex differences (as none are expected) we will test for sex difference in all analyses.</p>
</div>
</section>
<section id="approach" class="level2">
<h2 class="anchored" data-anchor-id="approach">Approach</h2>
<p>My approach organization:</p>
<ol type="1">
<li>Background (long)</li>
<li>General methods (medium - anything shared across aims)</li>
<li>Overview of experiments (short - 1 paragraph and a table or figure)</li>
<li>Each aim</li>
</ol>
</section>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<ul>
<li>See above comments on significance: your goal is to educate reviewers on the current state of the field, the major gap in the literature, and your proposal for filling this critical need.</li>
</ul>
</section>
<section id="general-methods" class="level2">
<h2 class="anchored" data-anchor-id="general-methods">General methods</h2>
<p>Things that are common across aims, so depends on your design. Could include things like:</p>
<ul>
<li>Participant recruitment, inclusion/exclusion criteria</li>
<li>Data collection (e.g., I sometimes have general sections on pupillometry or fMRI)</li>
<li>Any assessments that are common across aims</li>
</ul>
</section>
<section id="sample-size" class="level2">
<h2 class="anchored" data-anchor-id="sample-size">Sample size</h2>
<ul>
<li>In the real world, small sample sizes and poor reliability are enormous problems</li>
<li>These are often (though perhaps not always) overlooked at study section
<ul>
<li>A lot of ‚Äúrules of thumb‚Äù and gut instincts drive reviewer comments</li>
</ul></li>
</ul>
</section>
<section id="sample-size-1" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-1">Sample size</h2>
<p><strong>DO</strong>:</p>
<ul>
<li>Make your best effort</li>
<li>Use real numbers (means, variance)</li>
<li>Read the statistical literature</li>
<li>Consult a statician if necessary (early)</li>
<li>Err on the side of too many participants</li>
<li>Account for attrition</li>
</ul>
</section>
<section id="sample-size-2" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-2">Sample size</h2>
<p><strong>DON‚ÄôT</strong>:</p>
<ul>
<li>Be vague (‚ÄúWe run enough participants to detect an effect of 0.8, p &lt; .05, calculated using GPower‚Äù)</li>
<li>Devote too much space to power and sample size (which comes at the expense of other things you need to explain)</li>
</ul>
</section>
<section id="sample-size-3" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-3">Sample size</h2>
<ul>
<li>One approach I have taken that has worked in grants, and also to some degree in my lab, is Bayes Factor Design Analysis (<a href="https://link.springer.com/article/10.3758/s13423-017-1230-y">Sch√∂nbrodt and Wagenmakers, 2018</a>)
<ul>
<li>Sequential sampling with optional stopping structured around the minimal sample size required for informative results</li>
<li>PROS: Gives you some wiggle room, avoids some pitfalls of other approaches</li>
<li>CONS: Most reviewers will not be familiar with it, may make budgeting tricky (although no one has ever brought this up)</li>
</ul></li>
</ul>
</section>
<section id="sample-size-behavioral-example" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-behavioral-example">Sample size behavioral example</h2>
<div style="font-size:.8em">
<p>We will use Bayes Factor Design Analysis (BFDA) to determine sample sizes for behavioral testing (Sch√∂nbrodt and Wagenmakers, 2018). BFDA is a form of sequential sampling that involves testing until sufficient evidence is collected for, or against, a hypothesis. Note that optional stopping does not bias interpretation of statistics (Rouder, 2014). For every experiment, we will run at least 80 participants per group, and continue until the main outcome reaches a Bayes Factor of ‚â• 10 or ‚â§ 0.1 (moderate evidence for or against the hypothesis). For planning purposes, we use a traditional multiple regression approach after Maxwell (2000). We assume a correlation of 0.3 between three primary predictor variables (age, hearing level, reward sensitivity), and a correlation of 0.3 between reward sensitivity and speech perception. Entering these into eq. 18 of Maxwell (2000) results in a minimum sample size of 218. We plan for 240 from each age group to account for anticipated 10% attrition. This results in 480 participants for each behavioral experiment (1440 participants).</p>
</div>
</section>
<section id="sample-size-fmri-example" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-fmri-example">Sample size fMRI example</h2>
<div style="font-size:.8em">
<p>Regarding power for fMRI studies, one question is how many participants we need for a significant group effect. For this, we used a prior fMRI study of reward (Wimmer et al., 2012) available on NeuroVault, and the power calculation technique by Durnez et al.&nbsp;(2016), which indicates 36 participants for a power of 0.9. We will run 36 young adults for each fMRI study, planning to recruit 40 to allow for data loss. For the older adults, we are interested in individual differences. Yarkoni and Braver (2010) argue that fMRI studies of individual differences are typically underpowered, and to achieve power of 0.8 for even a large correlation effect requires a minimum of 55 subjects. We will run 72 older adults in all fMRI studies, giving us power of &gt; 0.9 to detect effects reported by Peelle et al.&nbsp;(2011) in a correlation study of hearing and fMRI activity based on ROI-calculated effect sizes (Pearson r = -0.65 in auditory cortex). We anticipate 10% data loss (movement etc.),</p>
</div>
</section>
<section id="overview-of-aims" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-aims">Overview of aims</h2>
<ul>
<li>Often helpful to include an overview to provide the general structure and logic
<ul>
<li>If you have all the background stuff in significance, beginning of the ‚Äúapproach‚Äù is a good place for this</li>
<li>If you have a shorter significance and then a ‚Äúbackground‚Äù section in Approach, you can put the overview right before specific aims</li>
</ul></li>
</ul>
</section>
<section id="research-under-each-aim" class="level2">
<h2 class="anchored" data-anchor-id="research-under-each-aim">Research under each aim</h2>
<p>I start each aim with a paragraph to remind reviewers what the aim is about, and then have the following sections:</p>
<ul>
<li>Method</li>
<li>Predictions</li>
<li>Preliminary data</li>
<li>Challenges, potential pitfalls, or alternate outcomes</li>
</ul>
<p>(The last two sections sometimes get ommitted if I don‚Äôt have anything to include, but ideally each aim would have all sections.)</p>
</section>
<section id="what-methods-do-you-include" class="level2">
<h2 class="anchored" data-anchor-id="what-methods-do-you-include">What methods do you include?</h2>
<ul>
<li>You can‚Äôt include everything, but:</li>
<li>Reviewers should be able to tell what you are actually doing</li>
<li>Some details are important for assessing feasibility and/or power
<ul>
<li>number of participants</li>
<li>number of trials</li>
<li>what the stimuli and task are</li>
</ul></li>
</ul>
</section>
<section id="alternate-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="alternate-outcomes">Alternate outcomes</h2>
<ul>
<li>Each experiment should have alternate outcomes. What happens if you don‚Äôt get the result you predict?</li>
<li>I call this ‚ÄúChallenges, potential pitfalls, or alternate outcomes‚Äù and then I pick which of those I want to address. üò¨</li>
<li>(‚ÄúWe are unlikely to get an alternate outcome‚Äù is not very compelling)</li>
</ul>
</section>
<section id="feasibility" class="level2">
<h2 class="anchored" data-anchor-id="feasibility">Feasibility</h2>
<p><strong>Can you do what you say you will do?</strong></p>
<ul>
<li>Number of participants
<ul>
<li>Recruitment from particular groups (e.g.&nbsp;patient popultions)</li>
</ul></li>
<li>Analysis methods (do you propose __________ but have never done this before?)</li>
<li>Managing the budget/personnel</li>
</ul>
</section>
<section id="addressing-feasibility" class="level2">
<h2 class="anchored" data-anchor-id="addressing-feasibility">Addressing Feasibility</h2>
<p>As much as you can, anticipate what feasibility concerns reviewers might have (founded, or not) and be proactive about addressing them:</p>
<ul>
<li>Co-investigators / consultants</li>
<li>Letters of support</li>
<li>Prior publications</li>
<li>Preliminary data</li>
</ul>
</section>
<section id="preliminary-data" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-data">Preliminary data</h2>
<p>Preliminary data can serve different purposes:</p>
<ol type="1">
<li>Establish feasibility</li>
<li>Demonstrate expertise (see also #1)</li>
<li>Help the reviewers understand something</li>
</ol>
</section>
<section id="preliminary-data-1" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-data-1">Preliminary data</h2>
<p>Different kinds of preliminary data serve different purposes:</p>
<ul>
<li>A published figure from a manuscript in your lab can show your expertise and/or help reviewers understand something</li>
<li>A letter of support might be reassuring regarding recruitment or analyses</li>
<li>Data from a pilot study shows how the specific thing you are proposing might turn out
<ul>
<li>Reviewers vary in how closely they want preliminary data to match the specifics of what you propose.</li>
</ul></li>
</ul>
</section>
<section id="the-grant-writing-cycle" class="level2">
<h2 class="anchored" data-anchor-id="the-grant-writing-cycle">The grant-writing cycle</h2>
<ul>
<li>Be prepared for a roller coaster with 12 pages
<ul>
<li>Early on: oh my so many blank pages üò¨</li>
<li>Midway on: I can do this üí™</li>
<li>Near the end: 12 pages! üéâ</li>
<li>Nearer the end: Oh no 15 pages üò±</li>
<li>The very end: back to 12 pages PHEW ü•∞</li>
</ul></li>
</ul>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li>Remember your goal (communication) and your audience (tired grant reviewers who aren‚Äôt as expert in your niche as you think they are)</li>
<li>Start early and iterate</li>
<li>Be inspired by other people‚Äôs grants</li>
<li>Get feedback</li>
</ul>
</section>
<section id="questions" class="level2" data-background-image="images/jp01.jpg" data-background-repeat="no-repeat">
<h2 data-background-image="images/jp01.jpg" data-background-repeat="no-repeat" class="anchored" data-anchor-id="questions">Questions?</h2>
</section>
<section id="homework" class="level2">
<h2 class="anchored" data-anchor-id="homework">Homework</h2>
<ul>
<li>Outline research strategy</li>
</ul>
</section>
<section id="next-time" class="level2" data-background-image="images/huskies01.jpg" data-background-repeat="no-repeat" data-background-opacity="0.5">
<h2 data-background-image="images/huskies01.jpg" data-background-repeat="no-repeat" data-background-opacity="0.5" class="anchored" data-anchor-id="next-time">Next time</h2>
<p>Research strategy presentation</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>